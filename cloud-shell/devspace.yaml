version: v1beta9
images:
  cloud-shell:
    image: registry.noizwaves.cloud/cloud-shell
    rebuildStrategy: ignoreContextChanges
    build:
      buildKit: {}
deployments:
  - name: cloud-shell
    kubectl:
      replaceImageTags: true
      manifests:
        - kubernetes/cloud-shell.yaml
dev:
  sync:
    - containerName: cloud-shell
      labelSelector:
        name: cloud-shell
      initialSync: preferLocal
      containerPath: /root
      excludePaths:
        - '**'
        - '!/.aliases'
    - containerName: cloud-shell
      labelSelector:
        name: cloud-shell
      initialSync: preferLocal
      localSubPath: vscode/share
      containerPath: /root/.local/share/code-server
      excludePaths:
        - '**'
        - '!/User/settings.json'
  ports:
    - labelSelector:
        name: cloud-shell
      forward:
        - port: 8080
          remotePort: 8080
  logs:
    disabled: true
